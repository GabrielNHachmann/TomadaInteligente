{% include 'mqtt_app/partials/doctype.html' %}
<body class="min-h-screen p-6">

    <!-- CABEÇALHO ADICIONADO AQUI -->
    <header class="bg-indigo-600 text-white p-4 rounded-xl shadow-lg w-full max-w-sm mx-auto flex items-center justify-center space-x-2">
        {% include 'mqtt_app/partials/sidebarheader.html' %}
    </header>

    <!-- Container Principal do Controle (Centralizado Horizontalmente) -->
    <div class="bg-white shadow-2xl rounded-3xl p-8 sm:p-10 w-full max-w-sm transition-all duration-300 text-center border-t-8 border-indigo-500 mx-auto mt-6">
        
        <div class="flex justify-center mb-6">
            <!-- Ícone da Tomada (Maior e mais dinâmico) -->
            <i data-lucide="plug" id="plug-icon" class="w-16 h-16 text-gray-400 transition-colors duration-300"></i>
        </div>
        
        <h1 class="text-3xl font-extrabold text-gray-900 mb-1">Tomada da Sala</h1>
        <p class="text-indigo-600 font-medium mb-8">Controlo de Energia Inteligente</p>

        <!-- Indicador de Estado Simplificado (LIGADA / DESLIGADA) como um "pill" -->
        <div class="mb-8 p-0 rounded-full inline-flex transition-colors duration-300" id="status-indicator">
            <p id="status-text" class="text-xl font-extrabold tracking-wider transition-colors duration-300 px-6 py-2 rounded-full shadow-lg">DESLIGADA</p>
        </div>

        <!-- Controles (Botões) - Mais proeminentes e com sombra mais forte -->
        <div class="flex flex-col space-y-4">
            
            <!-- Botão Ligar -->
            <button id="turn-on-btn" onclick="togglePower(true)"
                    class="w-full bg-green-500 text-white font-extrabold py-5 rounded-2xl shadow-xl hover:shadow-2xl hover:bg-green-600 transition duration-300 transform hover:scale-[1.01] active:scale-[0.99] disabled:bg-green-200 disabled:opacity-70 flex items-center justify-center space-x-3 text-lg">
                <i data-lucide="power" class="w-6 h-6"></i>
                <span>LIGAR</span>
            </button>
            
            <!-- Botão Desligar -->
            <button id="turn-off-btn" onclick="togglePower(false)" disabled
                    class="w-full bg-red-500 text-white font-extrabold py-5 rounded-2xl shadow-xl hover:shadow-2xl hover:bg-red-600 transition duration-300 transform hover:scale-[1.01] active:scale-[0.99] disabled:bg-red-200 disabled:opacity-70 flex items-center justify-center space-x-3 text-lg">
                <i data-lucide="power" class="w-6 h-6"></i>
                <span>DESLIGAR</span>
            </button>
        </div>
        
    </div>

    <script>
        // Variável de Estado
        let isPowerOn = false;

        // Elementos DOM
        const turnOnBtn = document.getElementById('turn-on-btn');
        const turnOffBtn = document.getElementById('turn-off-btn');
        const statusText = document.getElementById('status-text');
        const plugIcon = document.getElementById('plug-icon');

        /**
         * Atualiza o estado visual do painel (botões, indicador, ícone).
         */
        function updateUI() {
            // Limpa classes de cor/sombra dinâmicas
            statusText.classList.remove('bg-green-500', 'text-white', 'bg-red-500');
            plugIcon.classList.remove('text-green-500', 'text-gray-400');

            if (isPowerOn) {
                // Estado LIGADO
                turnOnBtn.disabled = true;
                turnOffBtn.disabled = false;
                
                // Texto e Cores do Status (Apenas LIGADA)
                statusText.textContent = 'LIGADA';
                statusText.classList.add('bg-green-500', 'text-white');
                
                // Ícone da Tomada
                plugIcon.classList.add('text-green-500');

            } else {
                // Estado DESLIGADO
                turnOnBtn.disabled = false;
                turnOffBtn.disabled = true;

                // Texto e Cores do Status (Apenas DESLIGADA)
                statusText.textContent = 'DESLIGADA';
                statusText.classList.add('bg-red-500', 'text-white');
                
                // Ícone da Tomada
                plugIcon.classList.add('text-gray-400');
            }
        }

        /**
         * Alterna o estado da tomada.
         * @param {boolean} shouldTurnOn O novo estado desejado (true para Ligar, false para Desligar).
         */
        function togglePower(shouldTurnOn) {
            // Impede ações desnecessárias ou redundantes
            if (isPowerOn === shouldTurnOn) {
                return;
            }

            // Simulação de ação
            isPowerOn = shouldTurnOn;
            
            // Atualiza a interface visual
            updateUI();
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            // Estado inicial é DESLIGADO
            isPowerOn = false;
            updateUI();
        });
    </script>

</body>
</html>
